(()=>{"use strict";var t={673:(t,e,a)=>{a.d(e,{Z:()=>s});var n=a(645),r=a.n(n)()((function(t){return t[1]}));r.push([t.id,"button{border:0;outline:0;background-color:rgba(0,0,0,0);color:inherit;cursor:pointer}",""]);const s=r},115:(t,e,a)=>{a.d(e,{Z:()=>s});var n=a(645),r=a.n(n)()((function(t){return t[1]}));r.push([t.id,"input[type=color]{appearance:none;border:none;background-color:rgba(0,0,0,0);cursor:pointer;-webkit-appearance:none;-moz-appearance:none}",""]);const s=r},133:(t,e,a)=>{a.d(e,{Z:()=>s});var n=a(645),r=a.n(n)()((function(t){return t[1]}));r.push([t.id,".error{margin:0;padding:0 0 5px 2px;font-family:Helvetica,Arial,sans-serif;font-size:10px;letter-spacing:.07rem;opacity:0;transition:opacity .4s ease-in-out}.error.visible{opacity:.9}",""]);const s=r},399:(t,e,a)=>{a.d(e,{Z:()=>s});var n=a(645),r=a.n(n)()((function(t){return t[1]}));r.push([t.id,"input{border:0;outline:0}",""]);const s=r},189:(t,e,a)=>{a.d(e,{Z:()=>s});var n=a(645),r=a.n(n)()((function(t){return t[1]}));r.push([t.id,'.generate-cars-wrapper{display:flex;padding:10px;margin:20px auto;max-width:410px;background-color:#1e1b2c;border:6px solid #050114;box-shadow:0 0 7px 7px #e5106d,0 0 0 1px inset #f8c964}.generate-cars-wrapper label{align-self:center;margin-left:auto;cursor:pointer}.generate-cars-wrapper .car,.generate-cars-wrapper .car-icon{width:140px;height:40px}.create-car-inputs-wrapper{display:flex;align-items:center;gap:3px}.create-car-inputs-wrapper input[type=text]{width:183px;padding:5px;font-family:"Coolvetica",Helvetica,sans-serif;letter-spacing:.05rem;color:#f3f3f3;background-color:#3e385b;border:1px solid #f8c964;box-shadow:0 0 2px #f8c964}.create-car-inputs-wrapper input[type=text]::placeholder{font-family:Helvetica,sans-serif;color:rgba(248,201,100,.4)}.create-car-inputs-wrapper input[type=text].invalid{animation:blink .5s both}.create-car-inputs-wrapper input[type=color]{height:37px;width:37px}.create-car-inputs-wrapper input[type=color]::-webkit-color-swatch{border:1px solid #f8c964}.create-car-inputs-wrapper input[type=color]::-moz-color-swatch{border:1px solid #f8c964}.create-car-buttons-wrapper{display:flex;gap:10px;padding-left:5px}.create-car-buttons-wrapper .create-car-button,.create-car-buttons-wrapper .generate-cars-button{font-family:"Speedy",Helvetica,sans-serif;font-size:10px;padding:5px 13px 7px;border:1px solid #f8c964;box-shadow:0 0 3px #f8c964;transition:.4s}@media(hover: hover){.create-car-buttons-wrapper .create-car-button:hover,.create-car-buttons-wrapper .generate-cars-button:hover{background-color:#f8c964;box-shadow:0 0 6px #f8c964}}@keyframes blink{20%,60%,100%{border:1px solid #f8c964;box-shadow:0 0 2px #f8c964}0%,40%,80%{border:1px solid #e5106d;box-shadow:0 0 3px 2px #e5106d}}',""]);const s=r},203:(t,e,a)=>{a.d(e,{Z:()=>h});var n=a(645),r=a.n(n),s=a(667),i=a.n(s),o=a(591),c=a(723),l=r()((function(t){return t[1]})),d=i()(o),p=i()(c);l.push([t.id,'.car-track-container{position:relative;height:110px;margin-bottom:3px}.car-track-header{display:flex;align-items:center;gap:5px;height:30px;margin-bottom:3px;font-family:"Coolvetica",Helvetica,sans-serif;letter-spacing:.1rem}.car-track-header input[type=color]{width:30px;height:32px}.car-track-header input[type=color]::-webkit-color-swatch{border:1px solid #d133af}.car-track-header input[type=color]::-moz-color-swatch{border:1px solid #d133af}.car-track-header input[type=text]{width:200px;padding:4px 4px 3px 5px;text-align:center;font-family:inherit;font-size:14px;letter-spacing:inherit;color:#f3f3f3;background-color:rgba(0,0,0,0);border-bottom:2px dashed #d133af;cursor:pointer;transition:.4s}@media(hover: hover){.car-track-header input[type=text]:hover{background-color:#3e385b}}.car-track-header input[type=text]:focus{background-color:#544b7b;cursor:auto}.car-track-header .button-save,.car-track-header .button-delete{height:22px;padding-bottom:3px;font-family:inherit;letter-spacing:.05rem;border:1px solid #d133af;box-shadow:0 0 2px #d133af;transition:.4s}@media(hover: hover){.car-track-header .button-save:hover,.car-track-header .button-delete:hover{background-color:#d133af;box-shadow:0 0 5px #d133af}}.car-track-header .button-delete{width:22px;background-image:url('+d+');background-position:center center;background-size:12px 12px;background-repeat:no-repeat}.car-track{position:relative}.car-track-way{position:absolute;width:100%;height:60px;top:15px;background-color:#1e1b2c;transform:skew(-30deg);z-index:-1}.car-track-way::before{content:"";position:absolute;width:100%;height:4px;top:50%;transform:translateY(-50%);background:linear-gradient(to right, transparent 50%, #223049 50%);background-size:16px 2px,100% 4px}.car-track-finish{position:absolute;right:147px;height:100%;width:30px;background-color:#1e1b2c;background-size:cover;background-position:center center;background-image:url('+p+")}@media(max-width: 768px){.car-track-finish{right:117px}}.car-track-animation-controls{display:flex;gap:5px;padding:0 0 5px}.car-track-animation-controls .button-start,.car-track-animation-controls .button-stop{height:20px;width:20px;border-radius:3px}.car-track-animation-controls .button-start{padding-left:5px;background-color:#e5106d}.car-track-animation-controls .button-start:disabled{opacity:1;background-color:#a51151;color:#dadada}@media(hover: hover){.car-track-animation-controls .button-start:hover{box-shadow:0 0 5px 2px #e5106d}}.car-track-animation-controls .button-stop{background-color:#f8c964}.car-track-animation-controls .button-stop:disabled{opacity:1;background-color:#977944;color:#dadada}@media(hover: hover){.car-track-animation-controls .button-stop:hover{box-shadow:0 0 5px 2px #f8c964}}",""]);const h=l},137:(t,e,a)=>{a.d(e,{Z:()=>s});var n=a(645),r=a.n(n)()((function(t){return t[1]}));r.push([t.id,".car{width:120px;height:40px;display:flex;justify-content:center;align-items:center;filter:drop-shadow(0 0 1px)}@media(max-width: 768px){.car{width:90px;height:35px}}.car-icon{width:120px;height:40px;stroke:#050114;stroke-width:10px;stroke-linejoin:round;paint-order:stroke}@media(max-width: 768px){.car-icon{width:90px;height:35px}}",""]);const s=r},112:(t,e,a)=>{a.d(e,{Z:()=>s});var n=a(645),r=a.n(n)()((function(t){return t[1]}));r.push([t.id,'.race-animation-controls{display:flex;justify-content:center;gap:10px}.race-animation-controls .button-start,.race-animation-controls .button-stop{width:200px;height:38px;padding-bottom:5px;font-family:"Speedy",Helvetica,sans-serif;font-size:20px;letter-spacing:.2rem;background-color:#1e1b2c;transition:.4s}.race-animation-controls .button-start{border:3px solid #e5106d;box-shadow:0 0 5px #e5106d}@media(hover: hover){.race-animation-controls .button-start:hover{box-shadow:0 0 7px 3px #e5106d}}.race-animation-controls .button-start:active{box-shadow:none}.race-animation-controls .button-stop{border:3px solid #f8c964;box-shadow:0 0 5px #f8c964}@media(hover: hover){.race-animation-controls .button-stop:hover{box-shadow:0 0 7px 3px #f8c964}}.race-animation-controls .button-stop:active{box-shadow:none}',""]);const s=r},407:(t,e,a)=>{a.d(e,{Z:()=>s});var n=a(645),r=a.n(n)()((function(t){return t[1]}));r.push([t.id,'.modal{position:absolute;min-width:450px;top:35%;left:50%;margin:0 auto;text-align:center;font-family:"Blazed",Helvetica,sans-serif;font-size:24px;color:#f8c964;text-shadow:-4px 0 3px #e5106d;animation:pulsate 1.5s ease-in-out infinite both}@keyframes pulsate{0%{transform:translateX(-50%) scale(1)}50%{transform:translateX(-50%) scale(1.1)}100%{transform:translateX(-50%) scale(1)}}',""]);const s=r},541:(t,e,a)=>{a.d(e,{Z:()=>s});var n=a(645),r=a.n(n)()((function(t){return t[1]}));r.push([t.id,'.page-title{text-align:center;padding:10px 0 0;margin-bottom:5px;font-family:"Speedy",Helvetica,sans-serif;color:#f8c964;letter-spacing:.1rem}.cars-count{color:#d133af}.main-container{padding:0 15px}',""]);const s=r},685:(t,e,a)=>{a.d(e,{Z:()=>d});var n=a(645),r=a.n(n),s=a(667),i=a.n(s),o=a(886),c=r()((function(t){return t[1]})),l=i()(o);c.push([t.id,'.table-cell.table-header-cell{font-family:"Righteous",Helvetica,sans-serif;font-size:18px;letter-spacing:.15rem}@media(max-width: 640px){.table-cell.table-header-cell{font-size:16px}}.table-header-cell.wins-cell,.table-header-cell.time-cell{cursor:pointer}.marker{display:inline-block;width:15px;height:16px;background-image:url('+l+");background-size:contain;background-position:center top 20%;background-repeat:no-repeat;visibility:hidden}.marker.arrow-up{transform:rotate(180deg)}.marker.visible{visibility:visible}",""]);const d=c},838:(t,e,a)=>{a.d(e,{Z:()=>s});var n=a(645),r=a.n(n)()((function(t){return t[1]}));r.push([t.id,".table-row:nth-child(odd){background-color:#1e1b2c}",""]);const s=r},573:(t,e,a)=>{a.d(e,{Z:()=>s});var n=a(645),r=a.n(n)()((function(t){return t[1]}));r.push([t.id,'.winners-table{margin:0 auto;border:3px solid #e5106d;box-shadow:0 0 7px #e5106d;border-collapse:collapse}.table-cell{height:50px;font-family:"Righteous",Helvetica,sans-serif;text-align:center}@media(max-width: 640px){.table-cell{font-size:14px}}.number-cell{width:40px}@media(max-width: 640px){.number-cell{width:35px}}.image-cell{width:150px}.image-cell .car{width:100px;margin:0 auto}@media(max-width: 640px){.image-cell{width:120px}}.name-cell{width:250px}@media(max-width: 640px){.name-cell{width:145px}}.wins-cell{width:90px}@media(max-width: 640px){.wins-cell{width:70px}}.time-cell{width:90px}@media(max-width: 640px){.time-cell{width:70px}}',""]);const s=r},509:(t,e,a)=>{a.d(e,{Z:()=>s});var n=a(645),r=a.n(n)()((function(t){return t[1]}));r.push([t.id,'.pagination-container{display:flex;justify-content:center;align-items:center;gap:5px;padding:10px 0;font-family:"Coolvetica",Helvetica,sans-serif}.page-number{display:inline-block;padding-right:2px;min-width:28px;height:23px;font-size:18px;letter-spacing:.05rem;text-align:center;background-color:#d133af;box-shadow:0 0 5px #d133af;transform:skew(-30deg)}.button-prev,.button-next{font-family:inherit;font-size:20px;transition:.4s}@media(hover: hover){.button-prev:hover,.button-next:hover{color:#f8c964}}',""]);const s=r},807:(t,e,a)=>{a.d(e,{Z:()=>B});var n=a(645),r=a.n(n),s=a(667),i=a.n(s),o=a(926),c=a(484),l=a(893),d=a(283),p=a(878),h=a(124),u=a(913),m=a(549),f=a(689),g=a(952),b=a(16),w=r()((function(t){return t[1]})),x=i()(o),v=i()(c),y=i()(l),C=i()(d),k=i()(p),N=i()(h),A=i()(u),T=i()(m),S=i()(f),I=i()(g),Z=i()(b);w.push([t.id,'@font-face{font-family:"Rocket Script";src:url('+x+') format("woff2");src:url('+v+') format("woff");font-weight:400;font-style:normal}@font-face{font-family:"Speedy";src:url('+y+') format("woff2");src:url('+C+') format("woff");font-weight:400;font-style:normal}@font-face{font-family:"Coolvetica";src:url('+k+') format("woff2");src:url('+N+') format("woff");font-weight:400;font-style:normal}@font-face{font-family:"Righteous";src:url('+A+') format("woff2");src:url('+T+') format("woff");font-weight:400;font-style:normal}@font-face{font-family:"Blazed";src:url('+S+') format("woff2");src:url('+I+') format("woff");font-weight:400;font-style:normal}*{box-sizing:border-box}*:disabled{opacity:.6;pointer-events:none}html{scrollbar-gutter:stable both-edges;scrollbar-width:thin;scrollbar-color:#050114 rgba(255,255,255,.1)}html::-webkit-scrollbar{width:6px}html::-webkit-scrollbar-track{background-color:#050114}html::-webkit-scrollbar-thumb{background-color:rgba(255,255,255,.1);outline:0;border-radius:3px}body{background-color:#050114;color:#f3f3f3}.app-title{position:relative;margin:0;padding:30px 0 20px;font-family:"Rocket Script","Brush Script MT",cursive;font-size:46px;color:#e5106d;text-align:center;text-shadow:0 0 10px #e5106d;text-decoration:overline underline;text-underline-offset:18px}.app-title::before,.app-title::after{content:"";position:absolute;width:150px;height:70px;top:50%;background-image:url('+Z+');background-position:center center;background-size:150px 70px}.app-title::before{transform:translateX(calc(-100% - 20px)) translateY(-50%)}.app-title::after{transform:translateX(20px) translateY(-50%)}@media(max-width: 768px){.app-title{font-size:36px}.app-title::before,.app-title::after{width:100px;height:50px;background-size:100px 70px}.app-title::before{transform:translateX(calc(-100% - 15px)) translateY(-50%)}.app-title::after{transform:translateX(15px) translateY(-50%)}}.app-navigation{width:100%;display:flex;justify-content:center;gap:20px}.app-navigation .button{width:155px;height:38px;padding-bottom:3px;font-family:"Speedy",Helvetica,sans-serif;font-size:15px;letter-spacing:.1rem;color:#f3f3f3;border:8px dotted #f8c964;border-radius:3px;filter:drop-shadow(0 0 5px #f8c964);transition:.4s}.app-navigation .button:disabled{background-color:#e5106d;opacity:.9;cursor:default}@media(hover: hover){.app-navigation .button:hover{background-color:#e5106d;opacity:.9}}.footer{height:70px}',""]);const B=w},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var a=t(e);return e[2]?"@media ".concat(e[2]," {").concat(a,"}"):a})).join("")},e.i=function(t,a,n){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(n)for(var s=0;s<this.length;s++){var i=this[s][0];null!=i&&(r[i]=!0)}for(var o=0;o<t.length;o++){var c=[].concat(t[o]);n&&r[c[0]]||(a&&(c[2]?c[2]="".concat(a," and ").concat(c[2]):c[2]=a),e.push(c))}},e}},667:t=>{t.exports=function(t,e){return e||(e={}),"string"!=typeof(t=t&&t.__esModule?t.default:t)?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},379:t=>{var e=[];function a(t){for(var a=-1,n=0;n<e.length;n++)if(e[n].identifier===t){a=n;break}return a}function n(t,n){for(var s={},i=[],o=0;o<t.length;o++){var c=t[o],l=n.base?c[0]+n.base:c[0],d=s[l]||0,p="".concat(l," ").concat(d);s[l]=d+1;var h=a(p),u={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==h)e[h].references++,e[h].updater(u);else{var m=r(u,n);n.byIndex=o,e.splice(o,0,{identifier:p,updater:m,references:1})}i.push(p)}return i}function r(t,e){var a=e.domAPI(e);return a.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;a.update(t=e)}else a.remove()}}t.exports=function(t,r){var s=n(t=t||[],r=r||{});return function(t){t=t||[];for(var i=0;i<s.length;i++){var o=a(s[i]);e[o].references--}for(var c=n(t,r),l=0;l<s.length;l++){var d=a(s[l]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}s=c}}},569:t=>{var e={};t.exports=function(t,a){var n=function(t){if(void 0===e[t]){var a=document.querySelector(t);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(t){a=null}e[t]=a}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(a)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,a)=>{t.exports=function(t){var e=a.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(a){!function(t,e,a){var n="";a.supports&&(n+="@supports (".concat(a.supports,") {")),a.media&&(n+="@media ".concat(a.media," {"));var r=void 0!==a.layer;r&&(n+="@layer".concat(a.layer.length>0?" ".concat(a.layer):""," {")),n+=a.css,r&&(n+="}"),a.media&&(n+="}"),a.supports&&(n+="}");var s=a.sourceMap;s&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleTagTransform(n,t,e.options)}(e,t,a)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},952:(t,e,a)=>{t.exports=a.p+"f325394bbab6e088346c.woff"},689:(t,e,a)=>{t.exports=a.p+"e5c9c7b056f690c511f2.woff2"},124:(t,e,a)=>{t.exports=a.p+"49bba57f5fa1e1ab69f8.woff"},878:(t,e,a)=>{t.exports=a.p+"99919785b47ea0317c8a.woff2"},549:(t,e,a)=>{t.exports=a.p+"a170545fc724e5c6076c.woff"},913:(t,e,a)=>{t.exports=a.p+"3740ea6e2b4e110064ef.woff2"},484:(t,e,a)=>{t.exports=a.p+"79c0d56f088ff8400559.woff"},926:(t,e,a)=>{t.exports=a.p+"fae5237622b1c6bbf7b1.woff2"},283:(t,e,a)=>{t.exports=a.p+"8278c0a573c0be07a360.woff"},893:(t,e,a)=>{t.exports=a.p+"4ab2657d9de7b4304e84.woff2"},886:(t,e,a)=>{t.exports=a.p+"arrow-down.6c34102dfbc942e539ed.svg"},591:(t,e,a)=>{t.exports=a.p+"cross.2c948c8c7ccd3b032e46.svg"},723:(t,e,a)=>{t.exports=a.p+"finish.a9c3f1fb7bb87d73c750.svg"},16:(t,e,a)=>{t.exports=a.p+"flags.1a309897be2c98423975.svg"}},e={};function a(n){var r=e[n];if(void 0!==r)return r.exports;var s=e[n]={id:n,exports:{}};return t[n](s,s.exports,a),s.exports}a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;a.g.importScripts&&(t=a.g.location+"");var e=a.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&!t;)t=n[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=t})(),a.nc=void 0,(()=>{class t{constructor({tag:e="div",parent:a,classNames:n,content:r}={}){this.node=document.createElement(e),a instanceof t&&a.getNode().append(this.node),a instanceof HTMLElement&&a.append(this.node),n&&this.setCssClasses(n),r&&this.setTextContent(r)}getNode(){return this.node}insertChild(e){e instanceof t?this.node.append(e.getNode()):this.node.append(e)}prependChild(e){e instanceof t&&this.node.prepend(e.getNode())}prependChildren(t){t.forEach((t=>this.prependChild(t)))}insertChildren(t){t.forEach((t=>this.insertChild(t)))}setHtmlContent(t){this.node.innerHTML=t}setTextContent(t){this.node.textContent=t}setAttributes(t){Object.entries(t).forEach((([t,e])=>this.node.setAttribute(t,e)))}removeAttr(t){this.node.removeAttribute(t)}setCssClasses(t){t.forEach((t=>this.node.classList.add(t)))}removeCssClasses(t){t.forEach((t=>this.node.classList.remove(t)))}clearNode(){this.node.replaceChildren()}destroy(){this.node.remove()}addListener(t,e){"function"==typeof e&&this.node.addEventListener(t,e)}disable(){this.setAttributes({disabled:""})}enable(){this.removeAttr("disabled")}addId(t){this.node.id=t}}var e=a(379),n=a.n(e),r=a(795),s=a.n(r),i=a(569),o=a.n(i),c=a(565),l=a.n(c),d=a(216),p=a.n(d),h=a(589),u=a.n(h),m=a(673),f={};f.styleTagTransform=u(),f.setAttributes=l(),f.insert=o().bind(null,"head"),f.domAPI=s(),f.insertStyleElement=p(),n()(m.Z,f),m.Z&&m.Z.locals&&m.Z.locals;class g extends t{constructor(t){super({tag:"button",classNames:["button",...t.classNames??""],parent:t.parent,content:t.content}),this.isDisabled=!1,this.addListener("click",t.onClick)}toggleState(){this.isDisabled?this.enable():this.disable()}disable(){this.setAttributes({disabled:""}),this.isDisabled=!0}enable(){this.removeAttr("disabled"),this.isDisabled=!1}}var b=a(509),w={};w.styleTagTransform=u(),w.setAttributes=l(),w.insert=o().bind(null,"head"),w.domAPI=s(),w.insertStyleElement=p(),n()(b.Z,w),b.Z&&b.Z.locals&&b.Z.locals;class x extends t{constructor(t,e,a){super({parent:t,classNames:["pagination-container"]}),this.store=e,this.onBtnClick=a,this.render()}render(){this.prevBtn=new g({parent:this,classNames:["button-prev"],content:"<<",onClick:this.handlePrevBtnClick.bind(this)}),this.pageNumElement=new t({tag:"span",parent:this,classNames:["page-number"],content:this.store.page.toString()}),this.nextBtn=new g({parent:this,classNames:["button-next"],content:">>",onClick:this.handleNextBtnClick.bind(this)})}handlePrevBtnClick(){this.store.page-=1,this.update()}handleNextBtnClick(){this.store.page+=1,this.update()}update(){this.updatePageNum(),this.updateButtonsState(),this.onBtnClick()}updatePageNum(){this.pageNumElement.setTextContent(this.store.page.toString())}updateButtonsState(){1===this.store.page?this.prevBtn.disable():this.prevBtn.enable(),this.store.page===Math.ceil(this.store.carsCount/this.store.limit)?this.nextBtn.disable():this.nextBtn.enable()}}var v,y=a(541),C={};C.styleTagTransform=u(),C.setAttributes=l(),C.insert=o().bind(null,"head"),C.domAPI=s(),C.insertStyleElement=p(),n()(y.Z,C),y.Z&&y.Z.locals&&y.Z.locals,function(t){t.Garage="garage",t.Winners="winners"}(v||(v={}));class k extends t{constructor(t,e){super({classNames:["page",`${t}-page`]}),this.store=e,this.renderBaseView(t)}renderBaseView(e){const a=new t({tag:"h2",parent:this,classNames:["page-title"],content:e});this.carsCountElement=new t({tag:"span",parent:a,classNames:["cars-count"],content:`(#${this.store.carsCount})`}),this.mainContainer=new t({parent:this,classNames:["main-container"]}),this.pagination=new x(this,this.store,(()=>this.renderMainView()))}updateCarsCount(t){this.store.carsCount=t,this.pagination.updateButtonsState(),this.carsCountElement.setTextContent(`(#${this.store.carsCount})`)}}const N="http://localhost:3000";var A,T,S,I;!function(t){t.Garage="garage",t.Winners="winners",t.Engine="engine"}(A||(A={})),function(t){t.Started="started",t.Stopped="stopped",t.Drive="drive"}(T||(T={})),function(t){t.Ascending="ASC",t.Descending="DESC"}(S||(S={})),function(t){t.Id="id",t.Wins="wins",t.Time="time"}(I||(I={}));const Z=new Map;class B extends t{constructor(t){super({tag:"input",parent:t.parent}),this.defaultValue=t.defaultValue,this.setAttributes(t.attributes),t.value?this.setValue(t.value):this.setValue(t.defaultValue),t.onInput&&this.addListener("input",t.onInput)}getValue(){return this.node.value}setValue(t){this.node.value=t}clearInput(){this.node.value=this.defaultValue}}var $=a(115),P={};P.styleTagTransform=u(),P.setAttributes=l(),P.insert=o().bind(null,"head"),P.domAPI=s(),P.insertStyleElement=p(),n()($.Z,P),$.Z&&$.Z.locals&&$.Z.locals;const E="#ffffff";class M extends B{constructor(t){super({parent:t.parent,attributes:{type:"color"},defaultValue:E,value:t.value,onInput:t.onInput})}}var V=a(399),W={};W.styleTagTransform=u(),W.setAttributes=l(),W.insert=o().bind(null,"head"),W.domAPI=s(),W.insertStyleElement=p(),n()(V.Z,W),V.Z&&V.Z.locals&&V.Z.locals;class R extends B{constructor(t){super({parent:t.parent,attributes:{type:"text",...t.attributes},defaultValue:"",onInput:t.onInput,value:t.value})}}const z=t=>Math.floor(Math.random()*t),j=t=>(t/1e3).toFixed(2);var O,G=a(133),L={};L.styleTagTransform=u(),L.setAttributes=l(),L.insert=o().bind(null,"head"),L.domAPI=s(),L.insertStyleElement=p(),n()(G.Z,L),G.Z&&G.Z.locals&&G.Z.locals;class H extends t{constructor(t,e){super({tag:"p",parent:t,classNames:["error"],content:e})}async show(){this.setCssClasses(["visible"]),await(1500,new Promise((t=>{setTimeout(t,1500)}))),this.hide()}hide(){this.removeCssClasses(["visible"])}}!function(t){t.GarageUpdate="garage-update",t.WinnersUpdate="winners-update"}(O||(O={}));const U=new class{constructor(){this.listeners={[O.GarageUpdate]:[],[O.WinnersUpdate]:[]}}listen(t,e){this.listeners[t].push(e)}emit(t){this.listeners[t].forEach((t=>t()))}},D=["Storm","Liberty","Mirage","Falcon","Torch","Dragon","Stardust","Tracer","Ranger","Moonlight","Dawn","Aurora","Vulture","Blast","Trailblazer","Origin","Blitz"],_=["Ford","Jaguar","Volkswagen","Porsche","Renault","Volvo","BMW","Mercedes","Jeep","Chevrolet"],X=async t=>{t&&await Promise.all(t.map((t=>(async t=>{const e=`${N}/${A.Garage}`,a={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)};await fetch(e,a)})(t))))};var F=a(189),q={};q.styleTagTransform=u(),q.setAttributes=l(),q.insert=o().bind(null,"head"),q.domAPI=s(),q.insertStyleElement=p(),n()(F.Z,q),F.Z&&F.Z.locals&&F.Z.locals;const J=a.p+"car_icon.39d3ef90afbb40b246b3.svg";var Y=a(137),Q={};Q.styleTagTransform=u(),Q.setAttributes=l(),Q.insert=o().bind(null,"head"),Q.domAPI=s(),Q.insertStyleElement=p(),n()(Y.Z,Q),Y.Z&&Y.Z.locals&&Y.Z.locals;class K extends t{constructor(t){super({classNames:["car"]}),this.render(t)}render(t){this.svg=((t,e)=>{const a=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.createElementNS("http://www.w3.org/2000/svg","use");return n.setAttributeNS(null,"href",t),a.appendChild(n),["car-icon"].forEach((t=>a.classList.add(t))),a})(`${J}#car_icon`),this.insertChild(this.svg),this.setColor(t)}setColor(t){this.svg.style.fill=t,this.svg.style.filter=`drop-shadow(0 0 2px ${t})`}resetPosition(){this.node.style.transform="translateX(0)"}}class tt extends t{constructor(){super({classNames:["generate-cars-wrapper"]}),this.render()}render(){const e=new t({parent:this,classNames:["create-car-wrapper"]}),a=new t({parent:e,classNames:["create-car-inputs-wrapper"]});this.colorInput=new M({parent:a,onInput:()=>this.changeCarIconColor(this.colorInput.getValue())}),this.colorInput.addId("car-color"),this.nameInput=new R({parent:a,attributes:{placeholder:"Please enter a car name",required:"",pattern:".*\\S.*"}}),this.nameInput.addListener("animationend",(()=>this.nameInput.removeCssClasses(["invalid"]))),this.invalidInputMessage=new H(e,"Name should not be empty");const n=new t({parent:e,classNames:["create-car-buttons-wrapper"]});this.createCarBtn=new g({classNames:["create-car-button"],parent:n,content:"create car",onClick:async()=>{const t=this.getUserDefinedCarParams();t&&(await X(t),U.emit(O.GarageUpdate))}}),this.generateCarsBtn=new g({classNames:["generate-cars-button"],parent:n,content:"generate cars",onClick:async()=>{const t=Array(100).fill("").map((()=>({name:`${_[z(_.length)]} ${D[z(D.length)]}`,color:`#${Math.floor(16777215*Math.random()).toString(16)}`})));await X(t),U.emit(O.GarageUpdate)}}),this.car=new K(E);const r=new t({tag:"label",parent:this});r.setAttributes({for:"car-color"}),r.insertChild(this.car)}getUserDefinedCarParams(){if(this.nameInput.getNode().checkValidity()){const t=this.nameInput.getValue(),e=this.colorInput.getValue();return this.nameInput.clearInput(),this.colorInput.clearInput(),[{name:t,color:e}]}return this.nameInput.setCssClasses(["invalid"]),this.invalidInputMessage.show(),null}disableControls(){this.createCarBtn.disable(),this.generateCarsBtn.disable(),this.nameInput.disable(),this.colorInput.disable()}enableControls(){this.createCarBtn.enable(),this.generateCarsBtn.enable(),this.nameInput.enable(),this.colorInput.enable()}changeCarIconColor(t){this.car.setColor(t)}}class et extends t{constructor(t){super({classNames:[`${t.class}-animation-controls`]}),this.onStart=t.onStart,this.onStop=t.onStop,this.render(t.startButtonContent,t.stopButtonContent)}render(t,e){this.startBtn=new g({parent:this,classNames:["button-start"],content:t,onClick:this.onStart}),this.stopBtn=new g({parent:this,classNames:["button-stop"],content:e,onClick:this.onStop})}}class at{constructor(t){this.car=t.getNode()}addAnimation(t,e){this.start=0,this.numberOfPixels=t,this.duration=e,this.requestId=requestAnimationFrame(this.animate.bind(this))}animate(t){this.start=this.start||t;const e=t-this.start,a=e/this.duration,n=this.numberOfPixels*a;this.car.style.transform=`translateX(${n}px)`,e<this.duration&&(this.requestId=requestAnimationFrame(this.animate.bind(this)))}removeAnimation(){cancelAnimationFrame(this.requestId)}}var nt=a(407),rt={};rt.styleTagTransform=u(),rt.setAttributes=l(),rt.insert=o().bind(null,"head"),rt.domAPI=s(),rt.insertStyleElement=p(),n()(nt.Z,rt),nt.Z&&nt.Z.locals&&nt.Z.locals;class st extends t{constructor(t,e,a){super({parent:t,classNames:["modal"]}),this.carName=e,this.time=a,this.render()}render(){const e=new t({tag:"p",parent:this,classNames:["modal-text"],content:`${this.carName} wins in `});new t({tag:"span",parent:e,classNames:["modal-time"],content:`${this.time}s`})}}var it=a(203),ot={};ot.styleTagTransform=u(),ot.setAttributes=l(),ot.insert=o().bind(null,"head"),ot.domAPI=s(),ot.insertStyleElement=p(),n()(it.Z,ot),it.Z&&it.Z.locals&&it.Z.locals;class ct extends t{constructor(t){super({classNames:["car-track-container"]}),this.isCarStarted=!1,this.getTrackWidth=()=>{this.trackWidth=this.node.clientWidth-this.finishLine.getNode().clientWidth-this.car.getNode().clientWidth},this.car=new K(t.color),this.carId=t.id,this.carName=t.name,this.carColor=t.color,this.animation=new at(this.car),this.render()}render(){const e=new t({parent:this,classNames:["car-track-header"]});this.carNameInput=new R({parent:e,attributes:{required:"",pattern:".*\\S.*"},value:this.carName}),this.carNameInput.addListener("change",(()=>{this.carNameInput.getNode().checkValidity()||this.carNameInput.setValue(this.carName)})),this.carColorInput=new M({parent:e,value:this.carColor}),new g({classNames:["button-save"],parent:e,content:"save",onClick:()=>this.updateCarView()}),this.deleteCarBtn=new g({classNames:["button-delete"],parent:e,onClick:()=>this.removeCar()});const a=new t({parent:this,classNames:["car-track"]}),n=new t({parent:a,classNames:["car-track-way"]});this.finishLine=new t({parent:n,classNames:["car-track-finish"]}),this.carAnimationControls=new et({class:"car-track",startButtonContent:"A",stopButtonContent:"B",onStart:()=>this.createSingleCarRace(),onStop:()=>this.resetCar()}),a.insertChildren([this.carAnimationControls,this.car]),this.carAnimationControls.stopBtn.disable()}async updateCarView(){this.getCarViewParams(),await(async(t,e)=>{const a=`${N}/${A.Garage}/${t}`,n={method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)};await fetch(a,n)})(this.carId,{name:this.carName,color:this.carColor}),this.car.setColor(this.carColor),this.carNameInput.setValue(this.carName),U.emit(O.WinnersUpdate)}getCarViewParams(){this.carName=this.carNameInput.getValue(),this.carColor=this.carColorInput.getValue()}async removeCar(){await(async t=>{const e=`${N}/${A.Garage}/${t}`;await fetch(e,{method:"DELETE"})})(this.carId),await(async t=>{const e=`${N}/${A.Winners}/${t}`;await fetch(e,{method:"DELETE"})})(this.carId),U.emit(O.GarageUpdate),U.emit(O.WinnersUpdate)}async startCar(t){this.isCarStarted=!0,t||this.carAnimationControls.stopBtn.enable(),this.carAnimationControls.startBtn.disable(),this.deleteCarBtn.disable(),this.getTrackWidth();const{velocity:e,distance:a}=await(async t=>{const e=new AbortController;Z.set(t,e);const a=`${N}/${A.Engine}?id=${t}&status=${T.Started}`,n={method:"PATCH",signal:e.signal};return(await fetch(a,n)).json()})(this.carId);this.time=a/e}async animateCar(){return this.animation.addAnimation(this.trackWidth,this.time),(await(async t=>{const e=new AbortController;Z.set(t,e);const a=`${N}/${A.Engine}?id=${t}&status=${T.Drive}`,n={method:"PATCH",signal:e.signal},r=await fetch(a,n);return 500===r.status?{success:!1}:r.json()})(this.carId)).success?Promise.resolve({id:this.carId,time:Number(j(this.time))}):(this.animation.removeAnimation(),Promise.reject())}createSingleCarRace(){this.startCar().then((()=>this.animateCar())).catch((()=>{}))}async resetCar(){this.isCarStarted&&(this.isCarStarted=!1,this.carAnimationControls.stopBtn.disable(),await(async t=>{(t=>{const e=Z.get(t);e?.abort(),Z.delete(t)})(t);const e=`${N}/${A.Engine}?id=${t}&status=${T.Stopped}`;await fetch(e,{method:"PATCH"})})(this.carId),this.animation.removeAnimation(),this.car.resetPosition(),this.carAnimationControls.startBtn.enable(),this.deleteCarBtn.enable(),this.modal?.destroy())}createWinModal(){this.modal=new st(this,this.carName,j(this.time))}}var lt=a(112),dt={};dt.styleTagTransform=u(),dt.setAttributes=l(),dt.insert=o().bind(null,"head"),dt.domAPI=s(),dt.insertStyleElement=p(),n()(lt.Z,dt),lt.Z&&lt.Z.locals&&lt.Z.locals;class pt extends k{constructor(t){super(v.Garage,t),this.carTracks=[],this.isRaceOn=!1,U.listen(O.GarageUpdate,this.renderMainView.bind(this)),this.renderPageControls(),this.renderMainView()}renderPageControls(){this.carGenerationControls=new tt,this.raceAnimationControls=new et({class:"race",startButtonContent:"race",stopButtonContent:"reset",onStart:()=>this.createRace(),onStop:()=>this.resetRace()}),this.prependChildren([this.raceAnimationControls,this.carGenerationControls])}async renderMainView(){this.isRaceOn&&(this.isRaceOn=!1,this.resetCars(),this.raceAnimationControls.startBtn.enable(),this.carGenerationControls.enableControls());const{cars:t,carsCount:e}=await(async(t,e)=>{const a=`${N}/${A.Garage}?_page=${t}&_limit=${e}`,n=await fetch(a),r=await n.json();return{carsCount:Number(n.headers.get("X-Total-Count")),cars:r}})(this.store.page,this.store.limit);this.createCarTracks(t),this.updateCarsCount(e),this.addCarTracksToView()}createCarTracks(t){this.carTracks=t.map((t=>new ct(t)))}addCarTracksToView(){this.mainContainer.clearNode(),this.carTracks.forEach((t=>this.mainContainer.insertChild(t)))}async createRace(){if(!this.carTracks.length)return;await this.resetCars(),this.isRaceOn=!0,this.raceAnimationControls.startBtn.disable(),this.raceAnimationControls.stopBtn.disable(),this.carGenerationControls.disableControls();const t=this.carTracks.map((t=>t.startCar(!0).then((()=>t.animateCar()))));Promise.any(t).then((t=>{this.handleRaceEnd(t)})).catch((()=>{})),Promise.allSettled(t).catch((()=>{})).finally((()=>{this.raceAnimationControls.stopBtn.enable(),this.carGenerationControls.enableControls()}))}async resetCars(){return Promise.all(this.carTracks.map((t=>t.resetCar())))}async resetRace(){this.isRaceOn=!1,await this.resetCars(),this.raceAnimationControls.startBtn.enable()}async handleRaceEnd(t){this.showWinModal(t.id),await(async t=>{const e=await(async t=>{const e=`${N}/${A.Winners}/${t}`;return(await fetch(e)).json()})(t.id);if(e.id){const a={id:t.id,wins:e.wins+1,time:e.time>t.time?t.time:e.time};await(async t=>{const e=`${N}/${A.Winners}/${t.id}`,a={method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({wins:t.wins,time:t.time})};await fetch(e,a)})(a)}else{const e={id:t.id,wins:1,time:t.time};await(async t=>{const e=`${N}/${A.Winners}`,a={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)};await fetch(e,a)})(e)}})(t),U.emit(O.WinnersUpdate)}showWinModal(t){const e=this.carTracks.find((e=>e.carId===t));e?.createWinModal()}}var ht=a(838),ut={};ut.styleTagTransform=u(),ut.setAttributes=l(),ut.insert=o().bind(null,"head"),ut.domAPI=s(),ut.insertStyleElement=p(),n()(ht.Z,ut),ht.Z&&ht.Z.locals&&ht.Z.locals;class mt extends t{constructor(t,e,a){super({tag:"tr",parent:t,classNames:["table-row"]}),this.id=e.id,this.time=e.time,this.wins=e.wins,this.index=a,this.render()}async render(){const e=await(async t=>{const e=`${N}/${A.Garage}/${t}`;return(await fetch(e)).json()})(this.id);new t({tag:"td",parent:this,classNames:["table-cell","index-cell"],content:this.index}),new t({tag:"td",parent:this,classNames:["table-cell","image-cell"]}).insertChild(new K(e.color)),new t({tag:"td",parent:this,classNames:["table-cell","name-cell"],content:e.name}),new t({tag:"td",parent:this,classNames:["table-cell","wins-cell"],content:this.wins.toString()}),new t({tag:"td",parent:this,classNames:["table-cell","time-cell"],content:this.time.toString()})}}var ft=a(685),gt={};gt.styleTagTransform=u(),gt.setAttributes=l(),gt.insert=o().bind(null,"head"),gt.domAPI=s(),gt.insertStyleElement=p(),n()(ft.Z,gt),ft.Z&&ft.Z.locals&&ft.Z.locals;class bt extends t{constructor(t,e,a,n){super({tag:"th",parent:t,content:a,classNames:["table-cell","table-header-cell",e]}),n&&(this.onClick=n,this.renderMarker())}renderMarker(){this.addListener("click",(()=>this.handleClick())),this.marker=new t({tag:"span",parent:this,classNames:["marker"]})}handleClick(){this.showMarker(),this.onClick?.()}showMarker(){this.marker?.setCssClasses(["visible"]),this.marker?.getNode().classList.toggle("arrow-up")}hideMarker(){this.marker?.removeCssClasses(["visible"]),this.marker?.getNode().classList.remove("arrow-up")}}var wt=a(573),xt={};xt.styleTagTransform=u(),xt.setAttributes=l(),xt.insert=o().bind(null,"head"),xt.domAPI=s(),xt.insertStyleElement=p(),n()(wt.Z,xt),wt.Z&&wt.Z.locals&&wt.Z.locals;class vt extends t{constructor(t,e){super({tag:"table",parent:t,classNames:["winners-table"]}),this.sortWinners=e,this.render()}render(){const e=new t({tag:"thead",parent:this,classNames:["winners-table-head"]});new bt(e,"number-cell","â„–"),new bt(e,"image-cell","Image"),new bt(e,"name-cell","Name"),this.winsCell=new bt(e,"wins-cell","Wins",(()=>{this.sortWinners(I.Wins),this.timeCell.hideMarker()})),this.timeCell=new bt(e,"time-cell","Time",(()=>{this.sortWinners(I.Time),this.winsCell.hideMarker()})),this.tableBody=new t({tag:"tbody",parent:this})}renderRows(t,e){this.tableBody.clearNode(),t.forEach(((t,a)=>new mt(this.tableBody,t,e-1?`${e-1}${a+1}`:`${a+1}`)))}}class yt extends k{constructor(t){super(v.Winners,t),this.sortBy=I.Id,this.sortOrder=S.Ascending,U.listen(O.WinnersUpdate,this.renderMainView.bind(this)),this.winnersTable=new vt(this.mainContainer,this.sortWinners.bind(this)),this.renderMainView()}async renderMainView(){const{winners:t,winnersCount:e}=await(async(t,e,a=I.Id,n=S.Ascending)=>{const r=`${N}/${A.Winners}?_page=${t}&_limit=${e}&_sort=${a}&_order=${n}`,s=await fetch(r),i=await s.json();return{winnersCount:Number(s.headers.get("X-Total-Count")),winners:i}})(this.store.page,this.store.limit,this.sortBy,this.sortOrder);this.updateCarsCount(e),this.winnersTable.renderRows(t,this.store.page)}sortWinners(t){this.sortBy!==t?(this.sortBy=t,this.sortOrder=S.Ascending):this.sortOrder=this.sortOrder===S.Ascending?S.Descending:S.Ascending,this.renderMainView()}}const Ct={carsCount:0,page:1,limit:7},kt={carsCount:0,page:1,limit:10};var Nt=a(807),At={};At.styleTagTransform=u(),At.setAttributes=l(),At.insert=o().bind(null,"head"),At.domAPI=s(),At.insertStyleElement=p(),n()(Nt.Z,At),Nt.Z&&Nt.Z.locals&&Nt.Z.locals,new class{constructor(t){this.garagePage=new pt(Ct),this.winnersPage=new yt(kt),this.appRoot=t,this.render()}render(){const e=new t({tag:"header",parent:this.appRoot,classNames:["header"]}),a=(new t({tag:"h1",parent:e,classNames:["app-title"],content:"Async Race"}),new t({tag:"nav",parent:e,classNames:["app-navigation"]}));this.toGarageBtn=new g({parent:a,classNames:["garage-button"],content:"garage",onClick:()=>this.setActivePage(this.garagePage)}),this.toGarageBtn.disable(),this.toWinnersBtn=new g({parent:a,classNames:["winners-button"],content:"winners",onClick:()=>this.setActivePage(this.winnersPage)}),this.pageContainer=new t({parent:this.appRoot,classNames:["page-container"]}),new t({tag:"footer",parent:this.appRoot,classNames:["footer"]}),this.renderActivePage(this.garagePage)}setActivePage(t){this.renderActivePage(t),this.toGarageBtn.toggleState(),this.toWinnersBtn.toggleState()}renderActivePage(t){this.pageContainer.clearNode(),this.pageContainer.insertChild(t)}}(document.body)})()})();